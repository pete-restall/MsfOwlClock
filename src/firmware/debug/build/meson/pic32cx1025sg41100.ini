[host_machine]
system = 'smeg'
subsystem = 'pic32cx1025sg41100'
kernel = 'none'
cpu_family = 'arm'
cpu = 'armv7m'
endian = 'little'

[constants]
toolchain = '/opt/arm/local/cortex-m4f/bin'
arch = 'arm-none-eabi'
mcu_dir = 'mcu/microchip/pic32c/pic32cx1025sg41100'
libcrt0_arm_srcdir = libcrt0_srcdir / 'mcu/arm/cortex/m4'
libcrt0_pic32c_srcdir = libcrt0_srcdir / mcu_dir

[properties]
mcu_cpp_args = [
	'-mcpu=cortex-m4',
	'-mthumb',
	'-mfpu=fpv4-sp-d16',
	'-mfloat-abi=hard',
	'-DSMEG_MCU_RELATIVE_PATH=' + mcu_dir,
	'-DSMEG_MCU_RELATIVE_NAMESPACE=mcu::microchip::pic32c::pic32cx1025sg41100']

linker_script = libcrt0_pic32c_srcdir / 'linker/pic32cx1025sg41100.ld'
libcrt0_mcu_srcfiles = [
	libcrt0_arm_srcdir / 'IsrVectorTable.cc',
	libcrt0_arm_srcdir / 'ReservedIsr.cc',
	libcrt0_arm_srcdir / 'UnhandledIsr.cc',
	libcrt0_pic32c_srcdir / '_resetHandler.cc',
	libcrt0_pic32c_srcdir / 'crt0-task-stacks.cc',
	libcrt0_pic32c_srcdir / 'IsrVectorTable.cc']

[built-in options]
cpp_rtti = false

[binaries]
cpp = toolchain / arch + '-g++'
ar = toolchain / arch + '-ar'
ld = toolchain / arch + '-ld'
strip = toolchain / arch + '-strip'
objcopy = toolchain / arch + '-objcopy'
