(kicad_sch (version 20230121) (generator eeschema)

  (uuid 5a6cfdcb-c920-4ec8-b576-9ff0f29a2a59)

  (paper "A3")

  (title_block
    (title "MSF Owl Clock - Audio Output Module")
    (rev "0.1")
    (company "Pete Restall <pete@restall.net>")
  )

  (lib_symbols
    (symbol "restall-generic-connectors:header-1x2" (pin_names (offset 1.016) hide) (in_bom yes) (on_board yes)
      (property "Reference" "CONN" (at 0 3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "header-1x2" (at 0 -5.08 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Footprint" "" (at 0 -1.27 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "Datasheet" "~" (at 0 -1.27 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "Manufacturer" "" (at 0 -1.27 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "ManufacturerPartNumber" "" (at 0 -1.27 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "Manufacturer2" "" (at 0 -1.27 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "Manufacturer2PartNumber" "" (at 0 -1.27 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "ki_keywords" "conn connector header 1x2" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Generic Header Connector (1x2)" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "Connector*:*_1x??_* header*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "header-1x2_0_0"
        (rectangle (start -1.524 -1.016) (end -2.54 -1.524)
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (rectangle (start -1.524 1.524) (end -2.54 1.016)
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "header-1x2_1_1"
        (rectangle (start -2.54 2.54) (end 2.54 -2.54)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
        (pin passive line (at -5.08 1.27 0) (length 2.54)
          (name "P1" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
          (alternate "P1_PWRIN" power_in line)
          (alternate "P1_PWROUT" power_out line)
        )
        (pin passive line (at -5.08 -1.27 0) (length 2.54)
          (name "P2" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
          (alternate "P2_PWRIN" power_in line)
          (alternate "P2_PWROUT" power_out line)
        )
      )
    )
    (symbol "restall-generic-connectors:header-1x4" (pin_names (offset 1.016) hide) (in_bom yes) (on_board yes)
      (property "Reference" "CONN" (at 0 6.35 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "header-1x4" (at 0 -6.35 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Footprint" "" (at 0 -1.27 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "Manufacturer" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "ManufacturerPartNumber" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "Manufacturer2" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "Manufacturer2PartNumber" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) (justify left) hide)
      )
      (property "ki_keywords" "conn connector header 1x4" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Generic Header Connector (1x4)" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "Connector*:*_1x??_* header*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "header-1x4_0_0"
        (rectangle (start -1.524 -3.556) (end -2.54 -4.064)
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (rectangle (start -1.524 -1.016) (end -2.54 -1.524)
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (rectangle (start -1.524 1.524) (end -2.54 1.016)
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (rectangle (start -1.524 4.064) (end -2.54 3.556)
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "header-1x4_1_1"
        (rectangle (start -2.54 5.08) (end 2.54 -5.08)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
        (pin passive line (at -5.08 3.81 0) (length 2.54)
          (name "P1" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
          (alternate "P1_PWRIN" power_in line)
          (alternate "P1_PWROUT" power_out line)
        )
        (pin passive line (at -5.08 1.27 0) (length 2.54)
          (name "P2" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
          (alternate "P2_PWRIN" power_in line)
          (alternate "P2_PWROUT" power_out line)
        )
        (pin passive line (at -5.08 -1.27 0) (length 2.54)
          (name "P3" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
          (alternate "P3_PWRIN" power_in line)
          (alternate "P3_PWROUT" power_out line)
        )
        (pin passive line (at -5.08 -3.81 0) (length 2.54)
          (name "P4" (effects (font (size 1.27 1.27))))
          (number "4" (effects (font (size 1.27 1.27))))
          (alternate "P4_PWRIN" power_in line)
          (alternate "P4_PWROUT" power_out line)
        )
      )
    )
  )

  (junction (at 96.52 59.69) (diameter 0) (color 0 0 0 0)
    (uuid 8dd232d5-9f14-4519-9d86-15c954dc7712)
  )

  (bus_entry (at 77.47 50.8) (size 2.54 2.54)
    (stroke (width 0) (type default))
    (uuid 3ed761e9-0d86-4f63-9d6b-7a05895d5c98)
  )
  (bus_entry (at 77.47 62.23) (size 2.54 2.54)
    (stroke (width 0) (type default))
    (uuid 626f342d-5f99-445d-8914-5109e4f511e8)
  )

  (wire (pts (xy 80.01 53.34) (xy 88.9 53.34))
    (stroke (width 0) (type default))
    (uuid 33b741a6-24a4-4335-a3ae-67b60b776a12)
  )
  (wire (pts (xy 96.52 59.69) (xy 96.52 62.23))
    (stroke (width 0) (type default))
    (uuid 41c91824-4de5-4f1d-8430-cc465a94a6f9)
  )
  (bus (pts (xy 77.47 50.8) (xy 77.47 62.23))
    (stroke (width 0) (type default))
    (uuid 4ada22aa-4ad1-474a-8a08-61a22bce1275)
  )

  (wire (pts (xy 77.47 67.31) (xy 96.52 67.31))
    (stroke (width 0) (type default))
    (uuid 7224ef30-fe52-44db-826e-b14b05e5c9ae)
  )
  (wire (pts (xy 88.9 59.69) (xy 96.52 59.69))
    (stroke (width 0) (type default))
    (uuid 86606773-7720-46da-b0c6-2f8a58a03db2)
  )
  (wire (pts (xy 88.9 53.34) (xy 88.9 59.69))
    (stroke (width 0) (type default))
    (uuid 8c10e614-9654-4fcc-9fb1-4fd03fe601a0)
  )
  (bus (pts (xy 77.47 38.1) (xy 77.47 50.8))
    (stroke (width 0) (type default))
    (uuid 91243f29-d615-486a-98a9-ecbd8c0191b5)
  )
  (bus (pts (xy 76.2 38.1) (xy 77.47 38.1))
    (stroke (width 0) (type default))
    (uuid b3f59845-a588-4457-9200-14eecca8ad96)
  )

  (wire (pts (xy 106.68 74.93) (xy 114.3 74.93))
    (stroke (width 0) (type default))
    (uuid d93ac6f2-e8c4-4419-8ab0-2d8d317ee296)
  )
  (wire (pts (xy 106.68 77.47) (xy 114.3 77.47))
    (stroke (width 0) (type default))
    (uuid d943c568-d655-4448-b0af-102660f57a8a)
  )
  (wire (pts (xy 80.01 64.77) (xy 96.52 64.77))
    (stroke (width 0) (type default))
    (uuid e6042b6e-8a80-4ad7-bcf9-8beb8c220fbf)
  )

  (text "TODO: RC LPF FILTER ON AMP_IN, WITH AC COUPLING TO FORM AN HPF.  PLACE R CLOSE TO MCU PIN THEN THE TRACE ACTS AS A SMALL L."
    (at 115.824 89.662 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid ad562afb-5a4d-48fa-9968-572da5923fe0)
  )
  (text "TODO: DAC OUTPUT IS 2.5V.  THAT MEANS THE AUDIO AMP NEEDS A VDD > 5V TO ACCOMMODATE FULL SWING.\nREMEDY THIS BY ATTENUATING THE DAC OUTPUT, THUS ALLOWING FULL DAC RESOLUTION AND ALMOST RAIL-TO-RAIL OPAMP SWING.\nCAUTION - INVERTING OPAMP ATTENUATOR WILL NEED COMPENSATING TO PREVENT OSCILLATIONS.  A BASIC RESISTIVE DIVIDER MAY BE BETTER.  WORK IT OUT...\n\nALSO, THE USB VBUS MAY BE 4-6V.  FACTOR IN THE REQUIRED SWING BASED ON THE SELECTED SPEAKER, AS THAT DICTATES THE MAXIMUM POWER."
    (at 69.596 110.236 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid d18df01a-f183-4d3c-a558-c73c4363b8a9)
  )

  (label "AMP_EN" (at 88.9 64.77 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 0d2a941f-84cc-46f6-8eed-ee3d3df8f005)
  )
  (label "AMP_IN" (at 88.9 59.69 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 85e87ac0-bb81-4a25-b24b-a7e9da926141)
  )

  (hierarchical_label "{AUDIO_OUT}" (shape input) (at 76.2 38.1 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 625bc209-e197-44d2-ac87-55296a69c991)
  )
  (hierarchical_label "AUDIO_SPK_{+}" (shape output) (at 114.3 74.93 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid b1d8a464-8f69-4cc9-b350-dd5a9a18cc63)
  )
  (hierarchical_label "AUDIO_SPK_{-}" (shape output) (at 114.3 77.47 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid bba8838e-0940-4bbd-ae17-1b2f62a84b56)
  )
  (hierarchical_label "AUDIO_AMP_{+5V}" (shape input) (at 77.47 67.31 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid d5aaa902-56e1-4ce4-9345-af2bf2371e1a)
  )

  (symbol (lib_id "restall-generic-connectors:header-1x4") (at 101.6 63.5 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 5ff6557c-66a6-4471-80f7-c60757ae4844)
    (property "Reference" "CONN401" (at 97.0497 57.0598 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "header-1x4" (at 101.6 69.85 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Footprint" "" (at 101.6 64.77 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (property "Datasheet" "~" (at 101.6 63.5 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (property "Manufacturer" "" (at 101.6 63.5 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (property "ManufacturerPartNumber" "" (at 101.6 63.5 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (property "Manufacturer2" "" (at 101.6 63.5 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (property "Manufacturer2PartNumber" "" (at 101.6 63.5 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (pin "4" (uuid a387b244-f935-4cfe-8a1a-9c1452488743))
    (pin "1" (uuid 86bbbfa3-1af3-43a0-857f-67b70cabcc03))
    (pin "2" (uuid 99ee6005-306e-4590-8584-8e7e8218edb8))
    (pin "3" (uuid a7240f0d-cfed-40a5-9829-79491fc6627c))
    (instances
      (project "msf-owl-clock"
        (path "/56d623d3-22db-4d43-a9d9-e6bb4bb68946/6f5a1439-79e4-455f-9974-b67d6790034b"
          (reference "CONN401") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "restall-generic-connectors:header-1x2") (at 101.6 76.2 0) (mirror y) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid a5914524-ed10-46ca-985f-1912815a844b)
    (property "Reference" "CONN402" (at 101.6 72.39 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "header-1x2" (at 101.6 81.28 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Footprint" "" (at 101.6 77.47 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (property "Datasheet" "~" (at 101.6 77.47 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (property "Manufacturer" "" (at 101.6 77.47 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (property "ManufacturerPartNumber" "" (at 101.6 77.47 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (property "Manufacturer2" "" (at 101.6 77.47 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (property "Manufacturer2PartNumber" "" (at 101.6 77.47 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
    (pin "1" (uuid e5d2e980-4b13-4305-9eb3-75baa5b83702))
    (pin "2" (uuid 8104687b-0320-45a1-8d08-0e9236a508d5))
    (instances
      (project "msf-owl-clock"
        (path "/56d623d3-22db-4d43-a9d9-e6bb4bb68946/6f5a1439-79e4-455f-9974-b67d6790034b"
          (reference "CONN402") (unit 1)
        )
      )
    )
  )
)
