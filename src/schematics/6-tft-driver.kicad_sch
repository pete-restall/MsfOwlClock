(kicad_sch (version 20230121) (generator eeschema)

  (uuid 4cd0096c-1a6a-4f92-8322-bd3828241e86)

  (paper "A3")

  (title_block
    (title "MSF Owl Clock - TFT Driver Module")
    (rev "0.1")
    (company "Pete Restall <pete@restall.net>")
  )

  (lib_symbols
  )

  (bus_alias "TFT_CONN0" (members "TP_SCL" "TP_SDA" "TP_INT" "~{TP_{RST}}" "LED_{A}" "LED_{K}" "~{L_{RES}}" "L_{SDIN}" "L_{SCLK}" "L_{IO[1..3]}" "~{L_{CS}}" "L_{TE}"))
  (bus_alias "TFT_QSPI" (members "~{SS}" "SCK" "DATA[0..3]"))

  (text "Multiplex the QSPI data lines using TMUX1574RSVR." (at 152.146 119.634 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 006a3aca-b81a-465e-b786-5dd1d10fec57)
  )
  (text "TODO: TFT_QSPI needs bi-directional muxing for the four data pins and uni-directional for the ~{SS} and (possibly) SCK pins - a 1:2 buffer may suffice for SCK"
    (at 130.556 183.896 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 02414c11-604d-4fc2-be95-9b4d2deb8590)
  )
  (text "TODO: TFT_BACKLED are two unmux'd pins controlling the LED backlights"
    (at 128.524 173.736 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 2313d6e0-6453-4350-8011-6b9b762c01b6)
  )
  (text "TODO: I2C PINS NEED MULTIPLEXING BECAUSE THEY WILL HAVE THE SAME ADDRESS - PERHAPS JUST MUX SCK."
    (at 132.588 158.75 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 4634fa10-47d8-42dd-8776-3c33aacfa464)
  )
  (text "TODO: TFT_SEL controls the mux" (at 129.032 153.416 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 54a55d86-757f-41e4-b672-98e0f62b8472)
  )
  (text "TODO: TFT_TEAR are two unmux'd outputs" (at 129.286 189.23 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 7e62309c-e9b6-480e-abed-19ef7f1f72a9)
  )
  (text "TODO: USE ~{USB_SUSPEND} TO PUT THE MUXES INTO LOW-POWER MODE (!~{EN} PIN).  SAVES ABOUT 60uA."
    (at 128.27 168.402 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid b15bfd32-81ab-4ec3-9fd6-ec6414940969)
  )
  (text "TODO: TFT_TP_INT are two unmux'd lines from the connectors to the MCU"
    (at 129.286 163.83 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid b6f8646f-1289-4b63-a994-2d6f117be4f1)
  )
  (text "Multiplex the QSPI ~{SS} and SCK lines, and the I^{2}C, using another TMUX1574RSVR.  Cheapest and also matches propagation delays / skew."
    (at 152.4 124.714 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid b895f1e8-abbf-4434-a058-85af6566f16f)
  )
  (text "TODO: TFT_RESET is an input that also serves TFT_TP_RESET and goes to both TFTs (no mux)"
    (at 131.318 177.546 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid dd88fa3a-b130-4959-9f48-aae3e64aaa64)
  )
  (text "Unless otherwise specified:\n  All resistors and capacitors are 0402\n  All resistors are ±1% 100ppm 0.625W thick-film\n  All capacitors are ±20% X5R 10V MLCC "
    (at 301.244 261.62 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid eacc4ca3-65df-4b8e-b659-3ae350fed125)
  )

  (hierarchical_label "~{TFT_RESET}" (shape input) (at 127 177.546 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 718da752-b594-4776-bf11-d5e1aef17904)
  )
  (hierarchical_label "{TFT_CONN1}" (shape bidirectional) (at 127 139.7 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 898ee243-8623-4555-afb3-8b81814b0735)
  )
  (hierarchical_label "TFT_TP_INT[0..1]" (shape output) (at 127 162.56 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid a4e6d886-9c82-40b9-b6d2-43167ccff5a6)
  )
  (hierarchical_label "~{USB_SUSPEND}" (shape input) (at 127 167.64 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid c2f23c85-bfe9-4fb3-8fe4-7f25af185401)
  )
  (hierarchical_label "TFT_BACKLED[0..1]" (shape input) (at 127 172.72 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid c953982b-efa5-4329-8b86-a0af57f25c83)
  )
  (hierarchical_label "{TFT_CONN0}" (shape bidirectional) (at 127 137.16 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid da34dbe8-401f-4e57-99ba-a9f476f7e682)
  )
  (hierarchical_label "TFT_TEAR[0..1]" (shape output) (at 127 188.214 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid e18eed8d-2dac-4e84-b0c6-9146a84c7329)
  )
  (hierarchical_label "TFT_SEL" (shape input) (at 127 152.4 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid fde5749f-e4b3-46d3-b82e-cc9ed79cf984)
  )
  (hierarchical_label "{TFT_QSPI}" (shape bidirectional) (at 127 182.88 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid fe27053a-3ba5-42db-a408-85db89d2e93d)
  )
  (hierarchical_label "{I^{2}C}" (shape bidirectional) (at 127 157.48 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid ff15d4e1-c020-4d75-8c51-60da41617b32)
  )
)
